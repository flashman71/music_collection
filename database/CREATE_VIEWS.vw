/*
   Additonal views to simplify front end activity
*/

SET SERVEROUTPUT ON SIZE 100000

/* Collect all artists and associated albums */
CREATE OR REPLACE VIEW MUSIC_APP.ARTISTS_ALBUMS_V
AS
SELECT MART.ID ARTIST_ID,
       MART.NAME,
       MART.MBID,
       MALB.ID  ALBUM_ID,
       MALB.ALBUM_NAME       
FROM   MUSIC_APP.ARTISTS MART,
       MUSIC_APP.ALBUMS  MALB
WHERE  MART.ID = MALB.ARTIST_ID
/

/* Collect all albums and associated tracks */
CREATE OR REPLACE VIEW MUSIC_APP.ALBUMS_TRACKS_V
AS
SELECT MALB.ID ALBUM_ID,
       MALB.ALBUM_NAME,
       MATR.ID TRACK_ID,
       MATR.TRACK_NAME
FROM   MUSIC_APP.ALBUMS MALB,
       MUSIC_APP.TRACKS MATR
WHERE  MALB.ID = MATR.ALBUM_ID
/

/* Grant access to the roles */
GRANT SELECT ON MUSIC_APP.ARTISTS_ALBUMS_V TO MUSIC_COLL_RO
/
GRANT SELECT ON MUSIC_APP.ALBUMS_TRACKS_V TO MUSIC_COLL_RO
/

